{% extends 'ironcage/base.html' %}

{% load bootstrap3 %}

{% block content %}
<div class="row">
  <div class="col-md-6 col-md-offset-3">
    <h1>Accommodation booking</h1>

    {% if rooms %}
    <p>The following accommodation options are available:</p>
    <ul>
      {% for room in rooms %}
      <li>{{ room.description }} (Â£{{ room.cost_incl_vat }})</li>
      {% endfor %}
    </ul>
    {% else %}
    <p>There are currently no rooms available.</p>
    {% endif %}

    <hr />

    {% if not request.user.is_authenticated %}
    <p>Please <a href="{% url 'register' %}?next={{ request.path }}">sign up</a> or <a href="{% url 'login' %}?next={{ request.path }}">sign in</a> to book accommodation.</p>
    {% else %}
    <form action="{% url 'accommodation:booking_payment' %}" class="form">
      <div class="form-group">
        <select name="room" required class="form-control">
          <option disabled selected value>Choose your room:</option>
          {% for room in rooms %}
          <option value="{{ room.key }}">{{ room.description }}</option>
          {% endfor %}
        </select>
      </div>

      <input type="submit" value="Make booking" class="btn btn-primary">
    </form>
    {% endif %}
  </div>
</div>
{% endblock %}
